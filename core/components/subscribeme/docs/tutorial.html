<p>SubscribeMe provides a double-opt-in User registration system. It uses some parts of the Login package, so be sure that package is installed before using SubscribeMe.</p>
        
<p>SubscribeMe provides a request-to-subscribe message that will appear on pages at your site. When Users choose to subscribe and submit the registration form, they receive an email message with a link to confirm their registration. The request-to-subscribe message will not be shown to Users who are logged in. You can also hide it on selected pages with the <fixedpre>&noShow</fixedpre> property in the SmSubscribe snippet tag.</p>
        
<p>As soon as they submit the form, a User record and a User Profile for the User are saved in the MODX database, but with the User marked as inactive. When they respond by clicking on the link in the email, they are taken to the site, marked as active, logged in, and sent to a &quot;Registration Confirmed&quot; page (or another page of your choice).</p>
        
<p>The default registration form also includes the option of checkboxes for the User to indicate interests. The User's interests will be saved as a comma-separated list in the <fixedpre>comment</fixedpre> field of the User's Profile. This allows you to send email messages to Users based on their interests (an upcoming version of EmailResource will do this automatically). You can also design systems that respond to User interests by customizing menus, forwarding Users to particular parts of the site on login, etc.</p>

<p>Create a Resource called Thank You for Registering. Make it published but hidden from menus. Put something like this in the Resource Content field:</p>

<pre><fixedpre>
    <p>Thanks for registering. You will receive an email message soon containing a link that will activate your subscription. Please click on the link in the message to become an active subscriber.</p>
</fixedpre></pre>

<p>Make a note of the Thank You page's ID once you have saved it.</p>

<p>Create a resource called Registration Confirmed. Make it published but hidden from menus. Put something like the following in the Resource Content field:
</p>

<pre><fixedpre>
    <p>Congratulations, you are now a subscriber!</p>
</fixedpre></pre>

<p>The User should be logged in automatically when they confirm registration.</p>

<p>Make a note of the ID of your Registration Confirmed page.</p>

<p>Create a Resource called Confirm Register. Make it published but hidden from menus. Put only this code in the Resource Content field (replace ## with the ID of your Registration Confirmed page):</p>

<pre><fixedpre>
    [[!ConfirmRegister?
        &redirectTo=`##`
        &errorPage=`[[++site_start]]`
    ]]
</fixedpre></pre>

<p>Create a Resource called Register with something like this in the Resource Content field ( Replace the two ## values with the Ids of your Confirm Register page and Thank You pages):</p>


<pre><fixedpre>
    <p>Please fill out the following form and submit it to become a subscriber:</p>

    [[$SmRegisterForm? &confirmRegisterPageId=`##` &thankYouPageId=`##`]]

</fixedpre></pre>

<p>Put the following tag in the <fixedpre><body></fixedpre> section of any templates for pages that should show the request to subscribe. Replace the first two ## entries with the IDs of your Login page and Register page. In the <fixedpre>&noShow</fixedpre> property, put a comma-separated list containing the IDs of other pages where the request should not be shown. By default, the request is not shown on the Login page or the Register page, you'll probably also want to add the IDs of the &quot;Thank You for Registering&quot; page and the &quot;Confirm Register&quot page.</p>

<pre><fixedpre>
    [[!SmSubscribe? &loginPageId = `##` &registerPageId=`##` &noShow=`##,##,##`]]
</fixedpre></pre>


<p>Test your system by visiting the site from another browser where you are not logged in to the Manager. When you are logged in to the Manager and are previewing the site, your login status is ambiguous. You're logged in, but not to the 'web' context, so SubscribeMe's login status checks can give odd results.</p>

<h3>Customizing SubscribeMe</h3>

<p>To set the interests checkboxes on the Register form Edit the checkboxes at the end of the SmRegisterForm chunk to use any tags you want. You can add or delete checkboxes to meet your needs, but leave the hidden one at the beginning. When changing the name of an interest, be sure to change both the value and the visible HTML. in The code for each checkbox, the &quot;value&quot part is what will be saved to the User Profile. The visible part (the one on the right) is what the user will see when filling out the form.
</p>
        
<p>There is JavaScript validation for all fields in the Register form. All fields are required. The Username and Password fields are required to be at least 6 characters long and the two Password fields must match. The Email field is also checked to make sure it's a valid address. The User must also check at least one of the Interests checkboxes.</p>        
        
<p>If you don't want to use the interests feature at all, you can delete all the checkboxes, but the JavaScript validation may complain. You can either leave the hidden field and set its value to something, or edit the  SmRegisterJS chunk and remove the check at the end of the code. Be sure not to delete the closing curly brace at the end of the code or the code that follows it. You'll also need to remove the <fixedpre>&postHooks</fixedpre> property from the snippet tag at the top of the SmRegisterForm chunk.</p>        
        
<p>Styling the forms</p>        

<p>Both the Register form and the request to subscribe can be styled by editing the /assets/components/subscribeme/css/subscribeme.css file.</p>
        
<p>The height, width, and position of the two popup windows on the request to subscribe (triggered by the &quot;Why Should I&quot; and &quot;Privacy Policy&quot; buttons), can be controlled by adding the following properties to the SmSubscribe snippet tag in your template, but be aware that the locations may be different in different browsers &mdash; let me know if you find a solution:</p>
        
<pre><fixedpre>
    &whyDialogHeight
    &whyDialogWidth
    &whyDialogTop
    &whyDialogLeft
    &privacyDialogHeight
    &privacyDialogWidth
    &privacyDialogTop
    &privacyDialogLeft
</fixedpre></pre>        
        
<p>&nbsp;</p>



